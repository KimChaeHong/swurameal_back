<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.company.swurameal.dao.mybatis.GoodsImgDao">

	<insert id="insert" parameterType="GoodsImg">
		<selectKey keyProperty="goodsImgId" resultType="int" order="BEFORE">
			select SEQ_GOODSIMGID.nextval from dual
		</selectKey>
		insert into goods_img(
			GOODS_IMG_ID,
			GOODS_ID,
			GOODS_NAME,
			G_ATTACH_ONAME,
			G_ATTACH_TYPE,
			G_ATTACH_DATA,
			IMG_ROLE
		)
		values (
			#{goodsImgId}, -- GOODS_IMG_ID: 이미지 ID
			#{goodsId}, -- GOODS_ID: 상품 ID
			#{goodsName}, -- GOODS_NAME: 상품 이름
			#{gAttachOname}, -- G_ATTACH_ONAME: 원본 파일 이름
			#{gAttachType}, -- G_ATTACH_TYPE: 파일 타입 (예: jpg, png)
			#{gAttachData}, -- G_ATTACH_DATA: 파일 데이터 (BLOB 등)
			#{imgRole} -- IMG_ROLE: 이미지 역할 (메인, 설명, 상세)
		)
	</insert>
	
	<update id="update" parameterType="Goods">
		update goods set
		<if test="gAttachOname != null">
			G_ATTACH_ONAME = #{gAttachOname},
			G_ATTACH_TYPE = #{gAttachType},
			G_ATTACH_DATA = #{gAttachData}
		</if>
		where GOODS_ID = #{goodsId}
	</update>
	
	
	
</mapper>