<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.swurameal.dao.mybatis.OrderDao">

	<select id="selectOrderByUserId" parameterType="String" resultType="OrderWithItems">
		SELECT
			o.ORDER_ID,
			o.USER_ID,
			o.DELIVERY_STATUS,
			o.ORDER_STATUS,
			o.ORDER_DATE,
			oi.GOODS_ID,
			oi.GOODS_PRICE,
			gi.G_ATTACH_ONAME,
			gi.G_ATTACH_TYPE,
			gi.G_ATTACH_DATA,
			gi.IMG_ROLE
		FROM
			"ORDER" o 
		JOIN 
			order_item oi ON o.ORDER_ID = oi.ORDER_ID
		JOIN
			goods_img gi on oi.GOODS_ID = gi.GOODS_ID
		WHERE
			o.USER_ID = #{userId} <!-- AND o.ORDER_DATE BETWEEN TODATE(sysdate, 'yyyy-MM-dd') AND #{end_date} -->
	</select>

</mapper>