<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.company.swurameal.dao.mybatis.PickDao">

	<!-- 사용자 ID로 장바구니에 담긴 모든 상품 조회 -->
	<select id="selectPickByUserId" parameterType="string"
		resultType="Pick">
		SELECT *
		FROM pick
		WHERE user_id = #{userId}
	</select>


	<!-- 사용자 ID와 상품 ID로 장바구니의 특정 상품 조회 -->
	<select id="selectGoodsInPick" parameterType="map"
		resultType="Pick">
		SELECT *
		FROM pick
		WHERE user_id = #{userId}
		AND goods_id =
		#{goodsId}
	</select>

	<delete id="delete" parameterType="int">
		delete from pick where
		goods_id=#{goodsId}

	</delete>

	<insert id="insert" parameterType="Pick">
    <selectKey keyProperty="goodsId" resultType="int" order="BEFORE">
        SELECT seq_goodsid.nextval FROM dual
    </selectKey>
		INSERT INTO pick
		(user_id, goods_id, create_at)
		VALUES (#{userId}, #{goodsId}, #{createAt})
	</insert>


</mapper>